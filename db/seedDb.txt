// deletes everything (copy one by one)
MATCH(n) DETACH DELETE n
DROP CONSTRAINT ON (p:TopoNode) ASSERT p.uid IS UNIQUE

// creates the unique id constraint (copy first)
CREATE CONSTRAINT ON (p:`TopoNode`) ASSERT (p.`uid`) IS UNIQUE

// database data seed (copy all the statements in one go)
CREATE (TW: Platform: TopoNode {name:'TW', uid:'platform_0001'})

CREATE (Demand: Domain: TopoNode {name:'Demand', uid:'domain_0001'})
CREATE (Staffing: Domain: TopoNode {name:'Staffing', uid:'domain_0002'})
CREATE (Finance: Domain: TopoNode {name:'Finance', uid:'domain_0003'})
CREATE (People: Domain: TopoNode {name:'People', uid:'domain_0004'})
CREATE (PS: Domain: TopoNode {name:'Professional Services', uid:'domain_0005'})

CREATE(Billing: Capability: TopoNode {name: 'Billing', uid:'capability_0001'})
CREATE(SellingWork: Capability: TopoNode {name: 'Selling work', uid:'capability_0002'})
CREATE(ManagingAccounts: Capability: TopoNode {name: 'Managing Accounts', uid:'capability_0003'})
CREATE(StaffingProjects: Capability: TopoNode {name: 'Staffing projects', uid:'capability_0004'})
CREATE(LeaveTracking: Capability: TopoNode {name: 'Leave tracking', uid:'capability_0005'})
CREATE(InvoicingClients: Capability: TopoNode {name: 'Invoicing clients', uid:'capability_0006'})

CREATE
  (TW)-[:HAS]->(Demand),
  (TW)-[:HAS]->(Staffing),
  (TW)-[:HAS]->(Finance),
  (TW)-[:HAS]->(People),
  (TW)-[:HAS]->(PS),
  (Demand)-[:DOES]->(SellingWork),
  (Demand)-[:DOES]->(ManagingAccounts),
  (Staffing)-[:DOES]->(StaffingProjects),
  (People)-[:DOES]->(LeaveTracking),
  (PS)-[:DOES]->(Billing),
  (Finance)-[:DOES]->(InvoicingClients)

WITH TW as p
MATCH(p)-[:HAS]->(d) RETURN p, d

// show everything in the db
MATCH(n) RETURN n
